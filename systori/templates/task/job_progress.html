{% extends "project.html" %}
{% load i18n bootstrap dartium %}

{% block head %}
  {{ block.super }}
  {{ form.media.css }}
{% endblock head %}

{% block title %}{{ project.name }} > {{ job.name }}{% endblock %}

{% block menu_dropdown %}{% include "main/menu_dropdown.html" with section='projects' %}{% endblock %}
{% block head_navbar %}
  <li><a href="{% url 'project.view' project.pk %}">{{ project.name }}</a></li>
  <li class="active"><a href="{% url 'job.progress' project.pk job.pk %}">{{ job.name }}</a></li>
{% endblock %}

{% block content %}
  <form role="form" method="post">
    {% csrf_token %}
    {% bootstrap form %}
    <table is="progress-table" class="table table-condensed">
      <thead>
        <tr>
          <th>{% trans 'code' %}</th>
          <th>{% trans 'name' %}</th>
          <th>{% trans 'offered' %}</th>
          <th>{% trans 'unit' %}</th>
          <th>{% trans 'completed' %} <input type="checkbox" name="mark-complete"></th>
          <th>
            <select name="worker">
            {% for worker in workers %}
              <option value="{{ worker.id }}">{{ worker }}</option>
            {% endfor %}
            </select><br>
            {% trans 'worker' %}
          </th>
          <th>{% trans 'comment' %}</th>
        </tr>
      </thead>
      <tbody>
        {% include "task/job_progress_group.html" with group=job %}
      </tbody>
    </table>
    <div class="form-group">
      <button type="submit" class="btn btn-primary" value="{% trans 'Save' %}">{% trans 'Save' %}</button>
    </div>
  </form>
{% endblock %}

{% block extra_js %}
  {{ form.media.js }}
  {% fieldinit form %}
  {% dart "progress_editor.dart" %}
{% endblock %}
